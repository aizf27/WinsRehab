# 医生工号信息传递验证脚本

## 1. 测试环境准备
- 确保应用已安装并运行
- 准备一个有效的医生账号（工号：123456，密码：123456）

## 2. 登录流程验证

### 步骤1：启动应用并进入登录页
- **预期结果**：显示登录页面，包含用户名（工号）和密码输入框

### 步骤2：输入医生工号和密码
- 输入工号：123456
- 输入密码：123456
- **预期结果**：输入框显示正确的工号和密码

### 步骤3：点击登录按钮
- **预期结果**：
  - 登录成功
  - 如果是首次登录，自动跳转到医生信息页
  - 如果不是首次登录，自动跳转到医生主页

## 3. 医生信息页验证

### 步骤1：检查工号显示
- **预期结果**：页面顶部显示正确的工号（工号：123456）

### 步骤2：填写医生信息
- 姓名：张医生
- 年龄：35
- 性别：男
- 科室：康复科
- 患者数量：0
- **预期结果**：所有输入框显示正确的信息

### 步骤3：保存医生信息
- 点击保存按钮
- **预期结果**：
  - 显示保存成功提示
  - 自动跳转到医生主页

## 4. 医生主页验证

### 步骤1：检查患者列表
- **预期结果**：显示患者列表（可能为空）

### 步骤2：切换到底部导航的"信息"页
- **预期结果**：
  - 正确切换到医生信息页
  - 显示之前保存的医生信息
  - 工号显示正确（工号：123456）

### 步骤3：修改医生信息
- 修改姓名为：李医生
- 点击保存按钮
- **预期结果**：
  - 显示保存成功提示
  - 自动跳转到医生主页

### 步骤4：再次切换到"信息"页
- **预期结果**：显示修改后的医生信息（姓名：李医生）

## 5. 退出登录验证

### 步骤1：退出应用
- **预期结果**：应用正常关闭

### 步骤2：重新启动应用并登录
- 输入工号：123456
- 输入密码：123456
- **预期结果**：
  - 登录成功
  - 自动跳转到医生主页
  - 点击"信息"页显示之前保存的医生信息

## 6. 常见问题排查

### 问题1：信息页工号为空
- **可能原因**：
  - 登录页未传递工号
  - Activity未将工号传递给Fragment
- **解决方法**：
  - 检查DtLogActivity中的intent传递
  - 检查DtInfoActivity中的Fragment参数传递

### 问题2：保存医生信息后为空
- **可能原因**：
  - 医生对象创建时未正确设置工号
  - 数据库操作失败
- **解决方法**：
  - 检查dt_info_Fragment中的saveDoctorInfo方法
  - 检查DoctorRepository中的insertDoctor方法

### 问题3：看不到患者列表
- **可能原因**：
  - dt_homeFragment未接收到工号
  - 患者数据加载失败
- **解决方法**：
  - 检查DtHomeActivity中的Fragment参数传递
  - 检查PatientRepository中的getPatientsByDoctorId方法

## 7. 技术验证方法

### Logcat日志验证
- 过滤关键词："DoctorCode", "DoctorInfo", "PatientList"
- 检查日志中是否有工号信息的传递记录

### 数据库验证
- 使用Android Studio的Database Inspector查看数据库
- 检查doctor表中是否有正确的医生信息记录
- 检查patient表中是否有对应医生的患者记录

### 代码调试
- 在关键位置设置断点：
  - DtLogActivity的登录成功处理
  - DtHomeActivity的Fragment参数传递
  - DtInfoActivity的Fragment参数传递
  - dt_homeFragment和dt_info_Fragment的onCreate方法
